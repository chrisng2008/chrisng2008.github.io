#+hugo_base_dir: ~/myblog/
#+hugo_section: post
#+hugo_auto_set_lastmode: t
#+hugo_custom_front_matter: :author "Chris Ng"
#+hugo_code fence: nil
#+options: author:nil
#+STARTUP: logdrawer

* Blog Ideas
** DONE 使用Ox-hugo来写博客                     :org_mode:hugo:emacs:ox_hugo:
:PROPERTIES:
:EXPORT_FILE_NAME: blog-with-ox-hugo
:EXPORT_DATE: 2025-05-21
:EXPORT_HUGO_CATEGORIES: Emacs
:EXPORT_DESCRIPTION: 最近在学习Emacs，发现了一个能够使用 ~org mode~ 来写博客的新工具：ox-hugo，下面介绍我的配置方案。
:END:
还记得大四准备考研的时候，收听了一档播客叫 ~Emacs Talk~ ，听了里面的一些大牛分享他们的经历，受到了很多感触。尤其是听到经济学博士Kathy的有趣经历后，开始学习了 ~Emacs~ 之路。在Emcas Talk的推荐下，开始跟着子龙老师学习Emcas，但是学习了一段时间后，发现Emacs在Windwos上的性能实在是太差了，于是渐渐就放弃了这个工具。直到我最近换了一台Mac Mini后，使用了Unix系统，重新开始学习Emacs。我现在是Win和Mac双持，为了让 ~Emacs~ 能够成为我的生产力工具，我也探索出了在Windows平台使用Emacs的更好方法，就是在Wsl下使用Emacs，并使用Git进行多平台同步。
*** 安装Hugo
在Mac下通常使用包管理器 ~brew~ 来安装，在终端运行以下的命令即可。
#+BEGIN_SRC shell
brew install hugo
#+END_SRC

在Arch Linux环境下，通常使用包管理器 ~pacman~ 来进行安装，在终端下运行以下的命令
#+BEGIN_SRC shell
sudo pacman -S hugo
#+END_SRC

安装完后，可以在终端输入以下的命令来查看是否正确安装。
#+BEGIN_SRC shell
hugo version
#+END_SRC

****  新建博客站点
首先进入一个你存放文件的路径，然后输入以下的命令
#+BEGIN_SRC shell
  hugo new site blog
  cd blog
  git init
  git add .
  git commit -m "first commit"
#+END_SRC

**** 安装hugo主题Even
在当前的git下添加git模块
#+BEGIN_SRC shell
git submodule add https://github.com/olOwOlo/hugo-theme-even themes/even
#+END_SRC
将 ~hugo-blog/themes/even/exampleSite/config.toml~ 复制到站点的根目录下，替换根目录下的配置文件。
在博客根目录下运行以下的终端命令即可
#+BEGIN_SRC shell
hugo server
#+END_SRC

然而，在我的实际测试中，发现因为版本原因报错，原本的 ~config.toml~ 需要进行修改
#+BEGIN_SRC shell
# paginate = 5
pagination.paperSize = 5
#+END_SRC

**** 使用 Org mode 来写博客
首先安装 ~ox-hugo~ 模块，在emacs的配置文件中加入以下配置
#+BEGIN_SRC emacs-lisp
(use-package ox-hugo
  :ensure t   ;Auto-install the package from Melpa
  :pin melpa  ;`package-archives' should already have ("melpa" . "https://melpa.org/packages/")
  :after ox)
#+END_SRC  

这里按照ox-hugo的推荐，使用一个org文件进行写博客，每一个org subtree 对应一篇博客，org文件需要提前创建。
#+BEGIN_SRC emacs-lisp
(with-eval-after-load 'org-capture
  (defun org-hugo-new-subtree-post-capture-template ()
    "Returns `org-capture' template string for new Hugo post.
See `org-capture-templates' for more information."
    (let* ((title (read-from-minibuffer "Post Title: ")) ;Prompt to enter the post title
           (fname (org-hugo-slug title)))
      (mapconcat #'identity
                 `(
                   ,(concat "* TODO " title)
                   ":PROPERTIES:"
                   ,(concat ":EXPORT_FILE_NAME: " fname)
                   ":END:"
                   "\n\n")          ;Place the cursor here finally
                 "\n")))

  (add-to-list 'org-capture-templates
               '("h"                ;`org-capture' binding + h
                 "Hugo post"
                 entry
                 ;; It is assumed that below file is present in `org-directory'
                 ;; and that it has a "Blog Ideas" heading. It can even be a
                 ;; symlink pointing to the actual location of all-posts.org!
                 (file+headline "~/blog/all-blog.org" "Blog Ideas")
                 (function org-hugo-new-subtree-post-capture-template))))
#+END_SRC

在blog根目录下创建文件， ~.dir-locals.el~ ，内容如下。这个文件的作用是我们后续在修改org文件的时候，都会自动生成markdown文件。
#+BEGIN_SRC emacs-lisp
((org-mode . ((eval . (org-hugo-auto-export-mode)))))
#+END_SRC
需要在 ~all-blog.org~ 文件中加入以下的配置
#+CAPTION: all-org.org 配置
[[file:content/figure/blog_with_ox_hugo/1.png]]

**** 创建你的第一篇博客
如果跟着上面的步骤，在Emacs下输入 ~M+x org-capture~
[[file:content/figure/blog_with_ox_hugo/2.png]]

[[file:content/figure/blog_with_ox_hugo/3.png]]

在输入文字后，保存，即可自动生成markdown文件的博客。

需要注意的是，ox-hugo中的博客是以 ~to do~ 的形式来判断是否为草稿文件。
+ ~TODO~ ：代表未发布的文章，在生产Markdown的元数据中， ~draft=true~ ，只有在 ~hugo server -D~ 在会显示该文章。
+ ~DONE~ ：代表已完成的文章， ~DONE Date~ 会被作为发表的时间戳，当然也可以自己指定，具体请参考 [[https://ox-hugo.scripter.co/doc/org-meta-data-to-hugo-front-matter/][Org meta-data to Hugo front-matter]]
** TODO 酒吧的最后一夜
:PROPERTIES:
:EXPORT_FILE_NAME: mkc小分队第一次前往酒吧记录
:EXPORT_DATE: 2025-05-26
:EXPORT_HUGO_CATEGORIES: Life
:END:
2025年5月23日，完成汇报的我，如释重负。一人前往南亭吃饭，健身，结束时，想着要不到 TapTap 酒馆小酌一杯吧。这也不算是临时主意，前几天夜里便有打算，但是碍于麻烦，便搁置到那天。正好趁着周五结束汇报，无事一身轻松，小酌一杯也是个不错的选择。

于是，我独自一人来到期待已久的TapTap，刚开始还惶恐，我一个人进去喝酒会不会有点奇怪，但是都走到门口了，就进去看看吧。和以往不同的是，这一次就酒吧只有我一个人。依稀记得上次我到酒吧喝酒，是和didi、洛瑶一起，已经过去三四年了吧。上次去我们仨到北京路的一家酒吧，已经不记得名字了，只记得那位老板很健谈，与我们是老乡都是中山仔，调的酒很好喝，那天大家属于高考后的第一次相聚，谈得甚欢，最后卡着地铁末班车回去。那是我第一次和鸡尾酒，第二次是和杰前往深圳参加发达星期四的年会，但那次，严格上不属于酒吧。

回归正题，碍于我一个人来酒馆，外面的小桌子坐着来聚会的学生们，与我格格不入。我边坐在了窗台，点了杯9.9的荔枝笑尝尝。9.9的鸡尾酒，至今还没喝过这么便宜的，味道还算是凑合，有点可惜就是酒不是现调的，老板似乎也不太讲话，默默在吧台备餐，这不是我所期待的。喝完后，我又点了一杯长岛冰茶，这是我第一次喝这传闻中的“长岛冰茶”。长岛冰茶，这个名字，第一次是从杨千嬅的《可惜我是水瓶座》中了解到的，“拿来长岛冰茶换我半晚安睡”，后面的日子里，我对长岛冰茶也略有耳闻，第一次与didi去酒吧的时候，就想试试这杯传说中的长岛冰茶，可是当时碍于我不清楚自己的酒量和当时手头窘迫，点了杯更加便宜的鸡尾酒，当然，也不便宜，印象中也差不多百来块一杯。

这杯长岛冰茶，颜色似乎和我想象的有点差距，颜色不够深。初尝，意外地好喝，明知道由各种烈酒和可乐勾兑得来，酸甜又不会覆盖那点酒味，既有酒精的浓郁，又能尝到清爽的果酸。不愧是传闻中的失身酒，仅仅一杯，我就有点微醺的感觉了。

正巧当时佳哥在附近吃宵夜，于是便过来陪我喝酒，洋哥、于哥也一起过来喝。
